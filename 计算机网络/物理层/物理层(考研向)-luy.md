[TOC]

本文根据 [2019版王道考研 计算机网络](https://book.douban.com/subject/30634912/) 整理，因此更加面向考研，亦可作为期末复习材料用。

# 通信基础

## 基本概念

### 数据、信号、码元

数据是我们实际想要传输的信息实体。

信号是数据在传输过程中的表现形式。

数据与信号都可以表述为“模拟的”或者“数字的”。

- 模拟数据：指数据取值是连续变化的。例如我想传输一段音频，这就是模拟的数据。
- 数字数据：指数据取值是有限的离散值。例如我想传递一串二进制数字，它只能取0/1
- 模拟信号：指信号取值是连续变化的。例如音频在电话线中通过频率的变化来传递信息。
- 数字信号：指信号取值是是有限的离散值。例如脉冲是低电平还是高电平，只能取高/低

数据在传输时，分为串行传输与并行传输。远距离通信基本使用前者（处于经济上的考虑）。在计算机内部常使用并行传输)



码元是指一个固定时长的信号波形，代表了一位k进制的数字。

- 码元是指一段信号波形，它并不一定是不变的，也不一定只有高低两种。
- 如果这个码元可以取 K 种不同的值，称之为K进制码元，K又被称为码元的离散电平数目、有效离散数。
  - 例如，K = 2，只有两种不同的码元，一种代表0，一种代表1.
  - K = 4，码元是4进制的，那么它需要携带2bit的信息量来确定。00，01，10，11
  - 不难得出，一个 K 进制的码元，所需要携带的比特信息量为 `logK`（以2为底，下同）
- 此处的固定时长称为码元宽度。



### 信道、信源、信宿

![1607245575270](物理层(考研向)-luy.assets/1607245575270.png)



信道

- 按传输信号形式的不同可分为传送模拟信号的模拟信道和传送数字信号的数字信道两类；
- 信道按传输介质的不同可分为无线信道和有线信道。
- 实际的通信系统大多为双向的，即往往包含一条发送信道和一条接收信道，信道可以进行双向通信。



信道上传送的信号有基带信号和宽带信号之分。

- 基带信号是将数字信号1和0直接用两种不同的电压表示，然后送到数字信道上去传输（称为基带传输）
- 宽带信号是将基带信号进行调制形成的频分复用模拟信号，然后传送到模拟信道上去传输（称为宽带传输）



#### 三种通信方式

- 单向通信（单工通信）——只能有一个方向的通信而没有反方向的交互。
- 双向交替通信（半双工通信）——通信的双方都可以发送信息，但不能双方同时发送(当然也就不能同时接收)。
- 双向同时通信（全双工通信）——通信的双方可以同时发送和接收信息。

### 速率

速率表示数据传输的速率，又被称为数据率，表示单位时间的数据传输量，可以用比特率/波特率来表示。

- 码元传输速率，又称为码元速率、波形速率、调制速率、符号速率、**波特率**
- 单位时间内，系统传输的码元个数
- 单位是 `Baud`, 表示 `次/秒`
- 也可以理解成，单位时间内，脉冲信号变化的次数
- 码元可以是多进制的，但是波特率与码元的进制无关。
  - 假如一秒内传入的电平为：01001100
  - K = 2 时，每个码元携带1bit信息，传入了8个码元，波特率为8
  - K = 4 时，每个码元携带2bit信息，传入了4个码元（01，00，11，00），波特率为4



- 信息传输速率，又称为信息速率、数据传输速率、**比特率**
- 单位时间内，系统传输的比特个数。
  - 单位是 `bit/s` ，缩写为 `b/s`， `bps`
- 对于上面那个例子，无论 K 取何值，比特率都为 8(bit)/1(s)=8
- 不难得到，若一个码元携带 n bit 的数据，那么 M Baud 的码元传输速率对应的信息传输速率为 M * n bit/s。



## 通信理论

### Nyquist 定理

在理想低通(无噪音，带宽有限)的信道中，极限码元传输率(极限波特率)为
$$
2\times W \ \ \ Baud
$$
 其中W表示理想低通信道的带宽。



我们考虑这两个公式：
$$
对于K进制码元，一个码元需要\  log_2K\ bit\ 来存储\\
若一个码元携带\ n\ bit,且波特率为 M \ baud, 其比特率为\ M\times n\ bit/s
$$
可以得到，在理想低通的信道中，极限信息传输率（极限比特率）为
$$
2\times W \times log_2K\ \ \ bit/s
$$
由奈氏定理可知：

- 任何信道的码元传输速率都是有上限的。若超过，码元之间会因为互相串扰而无法识别。
- 信道的频带越宽，可以拥有更高的传输率
- 在带宽恒定的情况下，可以设法提高码元携带的比特数

### Shannon 定理

香农(Shannon) 推导出了**带宽受限且有高斯白噪声干扰**的信道的极限、无差错的信息传输速率（比特率）。

信道的**极限信息传输速率 C** 可表达为
$$
C = Wlog_2(1+S/N)\ \ \ bit/s\\W:信道带宽，S：传输信号平均功率，N：噪音平均功率
$$
称 `S/N`为信噪比，它有两种表示方式：

- 一种就是普通的数值表示，例如，信噪比为 127：1
- 另一种是带单位的表示，单位为 `dB`, 值为 `10*log_10{S/N}` 
- 这两种方式表达的是统一值，只是表示形式不同。单位表示只是便于传输过大/过小的信噪比

由香农定理可得：

- 带宽越大，信噪比越高，极限传输速率越高
- 如果带宽和信噪比确定，那么比特率的上限就确定了
- 实际信道的传输速率往往低于理论值

此外，在做题时，如果涉及到了码元进制和信噪比，需要使用两种定理分别计算，取较小值为传输上限。香浓定理不是奈氏定理的拓展。

## 编码与调制

### 常见编码

#### NRZ编码

#### 曼彻斯特编码

#### 差分曼彻斯特编码



# 交换技术

## 电路交换

在进行数据传输前，两个结点之间必须先建立一条专用（双方独占）的物理通信路径，该路径可能经过许多中间结点。该线路在整个数据传输期间一直被独占，直到通信结束后才被释放。因此，电路交换技术分为三个阶段：连接建立、数据传输和连接释放。

传统的电话网络就是使用的这种方式。

优点

1. 通信时延小。由于通信线路为通信双方用户专用，数据直达。在电路建成后，中间节点只负责无脑转发。
2. 有序传输。双方通信时按发送顺序传送数据，不存在失序问题。
3. 没有冲突。不同的通信双方拥有不同的信道，不会出现争用物理信道的问题。
4. 适用范围广。电路交换既适用于传输模拟信号，又适用于传输数字信号。
5. 实时性强。通信双方之间的物理通路一旦建立，双方可以随时通信。
6. 控制简单。电路交换的交换设备（交换机等）及控制均较简单

缺点

1. 建立连接时间长
2. 线路独占，使用效率低。电路交换连接建立后，物理通路被通信双方独占，即使通信线也不能供其他用户使用，因而信道利用率低。
3. 灵活性差。只要在通信双方建立的通路中的任何一点出了故障，就必须重新拨号建立新这对十分紧急和重要的通信是很不利的。
4. 难以规格化。电路交换时，数据直达，不同类型、不同规格、不同速率的终端很难相互也难以在通信过程中进行差错控制。



## 报文交换

数据交换的单位是报文，报文携带有目标地址、源地址等信息。报文交换在交换结点采用是存储转发的传输方式。也就是说，报文的全部内容先发送到交换结点，结点全部存储下来后，再向下一个结点转发。

报文交换主要使用在早期的电报通信网中，现在较少使用，通常被较先进的分组交换方式所取代。

优点：

1. 无需建立连接：报文交换不需要为建立时延，用户可以随时发送报文
2. 动态分配线路；当发送方把报文交给交换设备时，交换设备先存储整个报文，然后选择适的空闲线路，将报文发送出去。
3. 提高线路可靠性：如果某条传输路径发生故障，可重新选择另一条路径传输数据
4. 提高线路利用率：通信双方不是固定占有一条通信线路，而是在不同的时间一段一段地有这条物理通道，因而大大提高了通信线路的利用率。
5. 提供多目标服务：一个报文可以同时发送往多个目的地址

缺点：

1. 由于数据进入交换结点后要经历存储、转发这一过程，从而引起转发时延（包括接收报文、检验正确性、排队、发送时间等）
2. 报文交换对报文的大小没有限制，这就要求网络结点需要有较大的缓存空间。

## 分组交换

同报文交换一样，分组交换也采用了存储转发方式，但解决了报文交换中大报文传输的问题。分组交换限制了每次传送的数据块大小的上限，把大的数据块划分为合理的小数据块，再加上些必要的控制信息（如源地址、日的地址和编号信息等），构成分组（ Packet）作为传输单位。

目前绝大多数网络采用分组交换。

优点：

1. 无建立时延。不存在连接建立时延，随时发送分组。
2. 线路利用率高。
3. 简化了存储管理（相对于报文交换）.因为分组的长度固定，相应的缓冲区的大小也固定，点中存储器的管理通常被简化为对缓冲区的管理，相对比较容易。
4. 加速传输：分组是逐个传输，可以使后一个分组的存储操作与前一个分组的转发操作并流水线方式减少了报文的传输时间。此外，传输一个分组所需的缓冲区比传输一次报缓冲区小得多，这样因缓冲区不足而等待发送的几率及时间也必然少得多。
5. 减少了出错几率和重发数据量：因为分组较短，其出错几率必然减少，所以每次重发的就大大减小，这样不仅提高了可靠性，也减少了传输时延。

缺点：

1. 存在传输时延。尽管分组交换比报文交换的传输时延少，但相对于电路交换仍存在存发时延，而且其结点交换机必须具有更强的处理能力。
2. 需要传输额外的信息量。每个小数据块都要加上源、目的地址和分组编号等信息，从而构成分组，使传送的信息量大约增大5%~10%，一定程度上降低了通信效率，增加了处理的时间，使控制复杂，时延增加
3. 当分组交换采用数据报服务时，可能出现失序、丢失或重复分组，分组到达目的结点时，对分组按编号进行排序等工作。



分组交换由可分为数据报与虚电路两种实现方式。这两种方式都是由 **网络层** 提供的。其中，数据报是无连接的，虚电路是有连接的。

### 数据报

- 发送分组时不需要建立连接，发送方可随时发送。
- 网络尽最大努力交付，但不保证可靠性。意思是：可能会丢失，可能会污染，可能乱序抵达。
- 每个分组中都必须要包括接收端和发送端的完整地址。
- 分组会在交换结点存储转发，需要排队时延，结点还可能视情况丢弃部分包。（但这个时延相对较小）
- 网络通常由冗余路径，所以抗故障性好。

### 虚电路

- 发送分组时需要实现建立连接，发送结束后还需要拆除连接。需要建立时延，更适合长时间、大数据的交换。
- 在连接建立时，自动生成虚电路号，中间的每个交换结点都存储相关信息：{虚电路号，上一结点，下一结点}
- 连接建立后，每个分组不再需要带上收发地址，带上虚电路号即可，减少了开支。
- 提供了可靠通信，保证每个分组正确且按序到达。此外还可以对结点进行流量控制。
- 但是，该方式是故障敏感的，任何结点的故障会导致经过该结点的所有虚电路故障。

# 其他

## 传输介质

传输介质也称传输媒体/传输介质，它就是数据传输系统中在发送设备和接收设备之间的物理通路

**传输媒体并不是物理层。**传输媒体在物理层的下面，因为物理层是体系结构的第一层，因此有时称传输媒体为第0层。在传输媒体中传输的是信号，但传输媒体并不知道所传输的信号代表什么意思。但物理层规定了**电气特性**，因此能够识别所传送的比特流。

### 导向传输媒体

- 双绞线
  - 由两根采用一定规则并排绞合的、相互绝缘的铜导线组成
  - 屏蔽双绞线 STP (Shielded Twisted Pair)
  - 无屏蔽双绞线 UTP (Unshielded Twisted Pair)
- 同轴电缆
  - 由导体铜质芯线、绝缘层、网状编织屏蔽层和塑料外层构成
  - 50 Ω同轴电缆
  - 75 Ω 同轴电缆
- 光缆
  - 光纤的工作原理
    - 光线在纤芯中传输的方式是不断地全反射

### 非导向传输媒体

- 无线传输所使用的频段很广。
- 短波通信主要是靠电离层的反射，但短波信道的通信质量较差。
- 微波在空间主要是直线传播。
  - 卫星通信
  - 地面微波接力通信

## 物理层的接口特性

- 机械特性 指明接口所用接线器的形状和尺寸、引线数目和排列、固定和锁定装置等等。
- 电气特性 指明在接口电缆的各条线上出现的电压的范围。
- 功能特性 指明某条线上出现的某一电平的电压表示何种意义。
- 过程特性 指明对于不同功能的各种可能事件的出现顺序。

## 物理层设备

**中继器**

对信号进行再生和还原，对衰减的信号进行放大，保持与原数据相同，以增加信号传输的距离。延长网络的长度。

两端的网络速率要相同。中继器只将任何电缆段上的数据发送到另一端电缆上，它仅作用于信号的电气部分，并不管数据中是否有错误数据或不适于网段的数据。

**5-4-3规则**：同时串联的中继器最多4个，能够串联5段链路，同时最多挂接3台计算机。

网络标准中都对信号的延迟范围作了具体的规定，因而中继器只能在规定的范围内进行，否则会网络故障。

**集线器（多口中继器）**

**集线器的功能：**对信号进行再生放大转发，对衰减的信号进行放大，接着转发到其他所有（除输入端口外）处于工作状态的端口上，以增加信号传输的距离，延长网络的长度。不具备信号的定向传送能力，是一个共享式设备。